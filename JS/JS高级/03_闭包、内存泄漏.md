### JS闭包

截图代码执行过程

![03_JS闭包1](D:\前端视频\js高级\截图\03_JS闭包1.png)

foo()函数执行到7行后便执行完了，此时foo函数执行上下文会销毁，但在bar函数中还是可以访问当foo中的 name 变量，这便形成了闭包。

闭包由两部分组成：函数 + 可以访问的自由变量

![03_JS闭包2](D:\前端视频\js高级\截图\03_JS闭包2.png)

综上，闭包的定义：

- 一个普通的函数function，如果它跨域访问外层作用域的自由变量，那么这个函数就是闭包；
- 从广义的角度来说：JavaScript中的函数都是闭包；
- 从狭义的角度来说：JavaScript中一个函数，如果访问了外层作用域的变量，那么它是一个闭包；



### 内存及内存泄漏

代码执行前内存的分配以及指向

![03_内存泄漏1](D:\前端视频\js高级\截图\03_内存泄漏1.png)



![03_内存泄漏2](D:\前端视频\js高级\截图\03_内存泄漏2.png)



![03_内存泄漏3](D:\前端视频\js高级\截图\03_内存泄漏3.png)

导致内存泄漏

![03_内存泄漏4](D:\前端视频\js高级\截图\03_内存泄漏4.png)

解决内存泄漏

![03_内存泄漏5](D:\前端视频\js高级\截图\03_内存泄漏5.png)



### 闭包内存泄漏

![03_内存泄漏6](D:\前端视频\js高级\截图\03_内存泄漏6.png)